# Telegram Mini App - –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## ‚úÖ –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### 1. –ü–æ–¥–¥–æ–º–µ–Ω –∏ SSL
- **URL**: https://miniapp.raphaelvpn.ru:8443
- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**: –û–±–Ω–æ–≤–ª—ë–Ω –∏ –≤–∫–ª—é—á–∞–µ—Ç miniapp.raphaelvpn.ru
- **–ü–æ—Ä—Ç**: 8443 (443 –∑–∞–Ω—è—Ç xray/VPN —Å–µ—Ä–≤–µ—Ä–æ–º)

### 2. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π server block –¥–ª—è miniapp.raphaelvpn.ru
- –£–±—Ä–∞–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Frame-Options` (–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª iframe)
- –î–æ–±–∞–≤–ª–µ–Ω `Content-Security-Policy: frame-ancestors` –¥–ª—è Telegram
- –ü—Ä–æ–∫—Å–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç 9090

### 3. Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω Telegram WebApp SDK
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (expand, ready, etc.)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è viewport
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ colorScheme

### 4. –ë–æ—Ç
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω WEBAPP_URL –≤ .env
- ‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç WebApp

## üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ BotFather

**–í–ê–ñ–ù–û**: –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Mini App:

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. `Bot Settings` ‚Üí `Menu Button`
5. `Configure menu button`
6. –í–≤–µ–¥–∏—Ç–µ URL: `https://miniapp.raphaelvpn.ru:8443`

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl -I https://miniapp.raphaelvpn.ru:8443/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–æ—Ç–∞
ps aux | grep main.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f /root/manager_vpn/bot.log
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **WebApp —Å–µ—Ä–≤–µ—Ä**: localhost:9090
- **Nginx –ø—Ä–æ–∫—Å–∏**: miniapp.raphaelvpn.ru:8443 ‚Üí 127.0.0.1:9090
- **SSL**: Let's Encrypt (raphaelvpn.ru, www.raphaelvpn.ru, miniapp.raphaelvpn.ru)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: /etc/nginx/sites-available/raphaelvpn

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"
3. –û—Ç–∫—Ä–æ–µ—Ç—Å—è Mini App —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ VPN

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- 6 —Ü–≤–µ—Ç–æ–≤—ã—Ö —Ç–µ–º (–≤–∫–ª—é—á–∞—è —Ç–µ–º—É Mini)
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ Telegram colorScheme (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è)
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è iOS, Android, Windows, macOS
- –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (v2rayNG, Shadowrocket, Hiddify –∏ –¥—Ä.)
- Haptic Feedback –¥–ª—è –∫–Ω–æ–ø–æ–∫

---

**–î–∞—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: 2025-11-16
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
