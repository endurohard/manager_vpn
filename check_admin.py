"""
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
"""
import asyncio
from bot.database import DatabaseManager
from bot.config import DATABASE_PATH, ADMIN_ID


async def check_admin():
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω–∞"""
    db = DatabaseManager(DATABASE_PATH)
    await db.init_db()

    print("=" * 60)
    print(f"–ü–†–û–í–ï–†–ö–ê –ê–î–ú–ò–ù–ê (ID: {ADMIN_ID})")
    print("=" * 60)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∞–¥–º–∏–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
    is_manager = await db.is_manager(ADMIN_ID)
    print(f"\n–ê–¥–º–∏–Ω –≤ —Ç–∞–±–ª–∏—Ü–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤: {'‚úÖ –î–ê' if is_manager else '‚ùå –ù–ï–¢'}")

    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
    managers = await db.get_all_managers()
    print(f"–í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤: {len(managers)}")

    admin_in_list = any(m['user_id'] == ADMIN_ID for m in managers)
    print(f"–ê–¥–º–∏–Ω –≤ —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤: {'‚úÖ –î–ê' if admin_in_list else '‚ùå –ù–ï–¢'}")

    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–¥–º–∏–Ω–∞
    admin_stats = await db.get_admin_revenue_stats(ADMIN_ID)
    print(f"\nüëë –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–¥–º–∏–Ω–∞:")
    print(f"   –ö–ª—é—á–µ–π: {admin_stats['total_keys']}")
    print(f"   –î–æ—Ö–æ–¥: {admin_stats['total']:,} ‚ÇΩ")

    print("\n" + "=" * 60)
    print("–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:")
    if not is_manager:
        print("‚ùó –ê–¥–º–∏–Ω –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.")
        print("   –ï–≥–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ '–î–û–•–û–î–´ –ê–î–ú–ò–ù–ê',")
        print("   –Ω–æ –æ–Ω –ù–ï –±—É–¥–µ—Ç –≤ —Å–ø–∏—Å–∫–µ '–î–ï–¢–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û –ú–ï–ù–ï–î–ñ–ï–†–ê–ú'.")
        print("\n–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∞ –≤ —Å–ø–∏—Å–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:")
        print(f"   –í –±–æ—Ç–µ: –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Üí –î–æ–±–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ‚Üí {ADMIN_ID}")
    else:
        print("‚úÖ –ê–¥–º–∏–Ω –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä.")
        print("   –ï–≥–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ò –≤ —Ä–∞–∑–¥–µ–ª–µ '–î–û–•–û–î–´ –ê–î–ú–ò–ù–ê',")
        print("   –ò –≤ —Å–ø–∏—Å–∫–µ '–î–ï–¢–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û –ú–ï–ù–ï–î–ñ–ï–†–ê–ú'.")
    print("=" * 60)


if __name__ == "__main__":
    asyncio.run(check_admin())
